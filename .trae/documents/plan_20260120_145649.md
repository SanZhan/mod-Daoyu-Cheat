# 修复公司页面殖民塞内加尔崩溃问题

## 问题分析
根据崩溃日志和代码分析，游戏在打开公司页面并选择殖民塞内加尔时崩溃，主要原因是脚本中存在多个严重错误：

1. **修饰符错误**：多个 `remove_modifier` 和 `add_modifier` 效果引用了不存在的修饰符（如 `daoyu_negative_country_legitimacy_base_add`）
2. **脚本化效果参数错误**：`daoyu_move_pop_religion_slaves_effect` 脚本化效果不应该有参数但被传递了参数
3. **变量错误**：大量变量未设置或未使用的警告
4. **事件孤立**：部分事件被标记为孤立

## 修复计划

### 1. 修复修饰符错误
- 检查并修复 `common/scripted_effects/daoyu_effects.txt` 中的修饰符引用错误
- 确保所有使用的修饰符都已正确定义

### 2. 修复脚本化效果参数错误
- 检查并修复 `events/daoyu_events.txt` 中 `daoyu_move_pop_religion_slaves_effect` 的调用，移除多余的参数
- 确保所有脚本化效果的调用符合其定义

### 3. 修复变量错误
- 清理未使用的变量
- 确保所有使用的变量都被正确初始化

### 4. 检查公司页面相关代码
- 重点检查与殖民相关的公司功能
- 确保公司页面的殖民操作不会触发有问题的脚本

### 5. 验证修复
- 测试公司页面的殖民塞内加尔功能
- 确保游戏不再崩溃

## 具体文件修改
1. `common/scripted_effects/daoyu_effects.txt` - 修复修饰符引用错误
2. `events/daoyu_events.txt` - 修复脚本化效果参数错误和变量问题
3. `events/daoyu_long_events.txt` - 检查公司相关代码的正确性